<!DOCTYPE html>
<html>
<head>
    <title>Workflow Diagram with Logos</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .workflow-container { display: flex; flex-direction: column; align-items: center; }
        .workflow-step { 
            display: inline-block; 
            margin: 10px; 
            padding: 20px; 
            border: 2px solid #007acc; 
            border-radius: 15px; 
            background: white; 
            text-align: center; 
            min-width: 140px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .step-number { 
            background: #007acc; 
            color: white; 
            border-radius: 50%; 
            width: 30px; 
            height: 30px; 
            display: inline-flex; 
            align-items: center; 
            justify-content: center; 
            margin-bottom: 10px;
            font-weight: bold;
        }
        .step-logo { width: 40px; height: 40px; margin: 10px 0; }
        .step-title { font-weight: bold; margin: 8px 0; color: #333; }
        .step-desc { font-size: 12px; color: #666; line-height: 1.3; }
        .flow-arrow { 
            font-size: 30px; 
            color: #007acc; 
            margin: 0 15px; 
            font-weight: bold;
        }
        .workflow-row { 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            margin: 30px 0; 
            flex-wrap: wrap; 
        }
        .tech-section { 
            margin-top: 50px; 
            background: white; 
            padding: 30px; 
            border-radius: 15px; 
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            width: 90%;
            max-width: 1000px;
        }
        .tech-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); 
            gap: 20px; 
            margin-top: 25px; 
        }
        .tech-item { 
            padding: 20px; 
            border: 1px solid #e0e0e0; 
            border-radius: 12px; 
            background: #fafafa; 
            text-align: center;
            transition: transform 0.2s;
        }
        .tech-item:hover { transform: translateY(-2px); }
        .tech-logo { width: 48px; height: 48px; margin: 0 auto 10px; }
        .tech-title { font-weight: bold; margin: 8px 0; }
        .tech-desc { font-size: 12px; color: #666; }
        h1 { color: #333; text-align: center; margin-bottom: 40px; }
        h3 { color: #007acc; margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="workflow-container">
        <h1>Project Architecture Workflow</h1>
        <div id="workflow-content">
            <!-- Workflow will be rendered here -->
        </div>
    </div>

    <script>
        function renderWorkflow(workflowData) {
            const container = document.getElementById('workflow-content');
            
            // Render main workflow steps
            const stepsHtml = workflowData.workflow.steps.map((step, index) => {
                const arrow = index < workflowData.workflow.steps.length - 1 ? '<span class="flow-arrow">&rarr;</span>' : '';
                const logo = step.logo ? `<img src="${step.logo}" alt="${step.title}" class="step-logo">` : '';
                return `
                    <div class="workflow-step">
                        <div class="step-number">${step.number}</div>
                        ${logo}
                        <div class="step-title">${step.title}</div>
                        <div class="step-desc">${step.description}</div>
                    </div>
                    ${arrow}
                `;
            }).join('');
            
            // Render technology components
            const techHtml = workflowData.workflow.components.length > 0 ? `
                <div class="tech-section">
                    <h3>Detected Technologies & Services</h3>
                    <div class="tech-grid">
                        ${workflowData.workflow.components.map(comp => `
                            <div class="tech-item">
                                <img src="${comp.logo}" alt="${comp.title}" class="tech-logo">
                                <div class="tech-title">${comp.title}</div>
                                <div class="tech-desc">${comp.description}</div>
                            </div>
                        `).join('')}
                    </div>
                </div>
            ` : '';
            
            container.innerHTML = `
                <div class="workflow-row">${stepsHtml}</div>
                ${techHtml}
                <div style="margin-top: 30px; padding: 20px; background: white; border-radius: 12px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center;">
                    <strong>Project Analysis Summary</strong><br><br>
                    <strong>Complexity Level:</strong> ${workflowData.metadata.project_complexity}<br>
                    <strong>Programming Languages:</strong> ${workflowData.metadata.languages_detected}<br>
                    <strong>Services & Technologies:</strong> ${workflowData.metadata.services_detected}
                </div>
            `;
        }

        // Load workflow data from API or use example
        async function loadWorkflow() {
            try {
                // Replace with actual API call
                const response = await fetch('/api/workflow');
                const data = await response.json();
                renderWorkflow(data);
            } catch (error) {
                // Use example data
                const exampleData = {
                    workflow: {
                        title: "Sample Project Architecture Workflow",
                        steps: [
                            { 
                                number: 1, 
                                title: "Developer", 
                                description: "Uploads project files", 
                                logo: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23333' d='M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 7V9C15 10.1 14.1 11 13 11V16L15 18V22H13V19L11 17V22H9V18L11 16V11C9.9 11 9 10.1 9 9V7H3V9H5V16C5 17.1 5.9 18 7 18H9V20H11V18H13C14.1 18 15 17.1 15 16V9H21Z'/%3E%3C/svg%3E"
                            },
                            { 
                                number: 2, 
                                title: "File Processing", 
                                description: "Analyzes project files", 
                                logo: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23007acc' d='M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z'/%3E%3C/svg%3E"
                            },
                            { 
                                number: 3, 
                                title: "Service Detection", 
                                description: "Identifies technologies", 
                                logo: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%23ff6b35' d='M9.5,3A6.5,6.5 0 0,1 16,9.5C16,11.11 15.41,12.59 14.44,13.73L14.71,14H15.5L20.5,19L19,20.5L14,15.5V14.71L13.73,14.44C12.59,15.41 11.11,16 9.5,16A6.5,6.5 0 0,1 3,9.5A6.5,6.5 0 0,1 9.5,3M9.5,5C7,5 5,7 5,9.5C5,12 7,14 9.5,14C12,14 14,12 14,9.5C14,7 12,5 9.5,5Z'/%3E%3C/svg%3E"
                            },
                            { 
                                number: 4, 
                                title: "Diagram Generation", 
                                description: "Creates architecture diagram", 
                                logo: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%2300c851' d='M22,21H2V3H4V19H6V17H10V19H12V16H16V19H18V17H22V21M18,14H22V16H18V14M12,6H16V9H12V6M16,15H12V10H16V15M6,10H10V12H6V10M10,16H6V13H10V16M4,8H8V11H4V8Z'/%3E%3C/svg%3E"
                            },
                            { 
                                number: 5, 
                                title: "User Interface", 
                                description: "Displays results", 
                                logo: "data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath fill='%236f42c1' d='M21,16V4H3V16H21M21,2A2,2 0 0,1 23,4V16A2,2 0 0,1 21,18H14L16,21V22H8V21L10,18H3C1.89,18 1,17.1 1,16V4C1,2.89 1.89,2 3,2H21Z'/%3E%3C/svg%3E"
                            }
                        ],
                        components: [
                            { 
                                title: "Python", 
                                description: "5 files", 
                                logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg" 
                            },
                            { 
                                title: "JavaScript", 
                                description: "3 files", 
                                logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg" 
                            },
                            { 
                                title: "AWS Lambda", 
                                description: "2 references", 
                                logo: "https://upload.wikimedia.org/wikipedia/commons/9/93/Amazon_Web_Services_Logo.svg" 
                            },
                            { 
                                title: "AWS S3", 
                                description: "1 reference", 
                                logo: "https://upload.wikimedia.org/wikipedia/commons/9/93/Amazon_Web_Services_Logo.svg" 
                            },
                            { 
                                title: "Docker", 
                                description: "1 reference", 
                                logo: "https://cdn.jsdelivr.net/gh/devicons/devicon/icons/docker/docker-original.svg" 
                            }
                        ]
                    },
                    metadata: {
                        project_complexity: "Medium",
                        languages_detected: 2,
                        services_detected: 3
                    }
                };
                renderWorkflow(exampleData);
            }
        }
        
        loadWorkflow();
    </script>
</body>
</html>